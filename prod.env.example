# ============================================================
# CVG Line Maintenance Dashboard — Production Environment
# ============================================================
# Production configuration template.
# ⚠️  NEVER commit actual secrets to version control
# ============================================================

# ─── Authentication (REQUIRED) ──────────────────────────────

# [REQUIRED] Auth.js session signing secret
# Generate a UNIQUE secret for production:
#   npm run generate-secret
#
# ⚠️  CRITICAL:
#   - Must be 32+ characters
#   - Must be unique per environment
#   - Store in secure secret manager (AWS Secrets, Azure Key Vault, etc.)
#   - Never use the dev secret in production
#
AUTH_SECRET=REPLACE_WITH_npm_run_generate-secret_OUTPUT

# ─── Database ───────────────────────────────────────────────

# SQLite database file path
# Production: Use absolute path or Docker volume mount
#
# Bare metal:
#   DATABASE_PATH=/var/lib/dashboard/dashboard.db
#
# Docker:
#   DATABASE_PATH=/app/data/dashboard.db
#   (with volume mount: ./data:/app/data)
#
DATABASE_PATH=/app/data/dashboard.db

# ─── First-Run Setup ────────────────────────────────────────

# ⚠️  SECURITY: Do NOT set these in production
# Instead, use the /setup page to create first admin interactively
#
# INITIAL_ADMIN_EMAIL=
# INITIAL_ADMIN_PASSWORD=

# ─── Application Settings ───────────────────────────────────

# Node environment (set automatically by deployment)
NODE_ENV=production

# Enable /api/seed endpoint (DISABLED in production)
# Even if enabled, requires superadmin authentication
ENABLE_SEED_ENDPOINT=false

# ─── Password Security (Production Defaults) ────────────────

# Strict password requirements for production deployments
# These are FALLBACK defaults (best practice: use server.config.yml)
PASSWORD_MIN_LENGTH=16
PASSWORD_MAX_LENGTH=128
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGITS=true
PASSWORD_REQUIRE_SPECIAL_CHARS=true
PASSWORD_PREVENT_COMMON=true
PASSWORD_MIN_ENTROPY=70

# ─── Logging ────────────────────────────────────────────────

# Log level for production
# Recommended: info (standard) or warn (quiet)
LOG_LEVEL=info

# ─── Error Tracking ─────────────────────────────────────────

# Sentry DSN for production error tracking
# Recommended: Enable for production monitoring
# Get your DSN from: https://sentry.io/settings/projects/
#
# SENTRY_DSN=https://YOUR_SENTRY_KEY@o123456.ingest.sentry.io/123456

# ============================================================
# Production Deployment Checklist
# ============================================================
#
# Security:
#   ✅ AUTH_SECRET generated fresh (not dev secret)
#   ✅ INITIAL_ADMIN_* not set (use /setup page)
#   ✅ ENABLE_SEED_ENDPOINT=false
#   ✅ All secrets stored in secret manager
#   ✅ Database path has proper permissions
#   ✅ SSL/TLS enabled (reverse proxy)
#
# Monitoring:
#   ✅ SENTRY_DSN configured
#   ✅ LOG_LEVEL set to info or warn
#   ✅ Log aggregation configured (CloudWatch, Datadog, etc.)
#   ✅ Healthcheck endpoint: /api/health
#
# Data:
#   ✅ Database backups scheduled (see BACKUP.md)
#   ✅ Volume mounts configured (Docker)
#   ✅ Disk space monitoring enabled
#
# Performance:
#   ✅ NODE_ENV=production
#   ✅ npm run build executed
#   ✅ SQLite WAL mode enabled (automatic)
#
# ============================================================
# Docker Compose Example
# ============================================================
#
# services:
#   dashboard:
#     build: .
#     ports:
#       - "3000:3000"
#     volumes:
#       - ./data:/app/data
#       - ./logs:/app/logs
#     env_file:
#       - .env.production
#     environment:
#       - NODE_ENV=production
#       - DATABASE_PATH=/app/data/dashboard.db
#     restart: unless-stopped
#     healthcheck:
#       test: ["CMD", "wget", "-q", "--spider", "http://localhost:3000/api/health"]
#       interval: 30s
#       timeout: 5s
#       retries: 3
#       start_period: 15s
#
# ============================================================
# Kubernetes ConfigMap/Secret Example
# ============================================================
#
# apiVersion: v1
# kind: Secret
# metadata:
#   name: dashboard-secrets
# type: Opaque
# stringData:
#   AUTH_SECRET: <base64-encoded-secret>
#   SENTRY_DSN: <your-sentry-dsn>
#
# ---
#
# apiVersion: v1
# kind: ConfigMap
# metadata:
#   name: dashboard-config
# data:
#   NODE_ENV: "production"
#   LOG_LEVEL: "info"
#   ENABLE_SEED_ENDPOINT: "false"
#   DATABASE_PATH: "/app/data/dashboard.db"
#
# ============================================================
# AWS ECS Task Definition Example
# ============================================================
#
# {
#   "containerDefinitions": [{
#     "environment": [
#       { "name": "NODE_ENV", "value": "production" },
#       { "name": "LOG_LEVEL", "value": "info" },
#       { "name": "DATABASE_PATH", "value": "/app/data/dashboard.db" }
#     ],
#     "secrets": [
#       {
#         "name": "AUTH_SECRET",
#         "valueFrom": "arn:aws:secretsmanager:region:account:secret:dashboard-auth-secret"
#       }
#     ]
#   }]
# }
#
# ============================================================
