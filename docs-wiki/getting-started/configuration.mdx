---
title: Configuration
description: Environment variables and app settings
---

# Configuration

The app uses a **two-layer configuration system**:

| Layer | File | What goes here |
|-------|------|---------------|
| **Environment variables** | `.env.local` / `.env.prod` | Secrets and deployment-specific values |
| **Application config** | `server.config.yml` | All non-secret settings |

## Environment Variables

Create `.env.local` in the project root. For a pre-filled dev setup:

```bash
cp docker/.env.dev.example .env.local
```

The app reads 7 environment variables:

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `AUTH_SECRET` | Yes | — | JWT signing secret (32+ chars). Generate: `npm run generate-secret` |
| `DATABASE_PATH` | No | `./data/dashboard.db` | SQLite file path |
| `NODE_ENV` | No | Set by Next.js | `development` or `production` |
| `BASE_URL` | No | *(from `app.baseUrl` in config)* | Override public base URL (reverse proxy scenarios) |
| `SENTRY_DSN` | No | *(disabled)* | Error tracking DSN |
| `INITIAL_ADMIN_EMAIL` | No | — | Dev only: auto-create first admin during seed |
| `INITIAL_ADMIN_PASSWORD` | No | — | Dev only: password for auto-created admin |

> See `docker/.env.example` for the full reference with documentation.

## Server Configuration (`server.config.yml`)

System settings are stored in `server.config.yml` (loaded at startup). Copy the dev template to get started:

```bash
cp server.config.dev.yml server.config.yml
```

| Section | Key Settings |
|---------|-------------|
| `app` | `title`, `baseUrl` (public URL for reverse proxy scenarios) |
| `logging` | `level` (trace/debug/info/warn/error) |
| `features` | `enableSeedEndpoint`, `cronEnabled` |
| `timeline` | `startOffset`, `defaultDays`, `defaultZoom`, `defaultTimezone` |
| `appearance` | `defaultColorMode`, `defaultThemePreset` |
| `flights` | `hideCanceled`, `cleanupGraceHours` |
| `passwordSecurity` | `minLength`, `maxLength`, character requirements, `minEntropy` |
| `cron.jobs` | Override built-in job schedules/options, or define custom jobs |

See [Scheduled Tasks](/docs/operations/scheduled-tasks) for the `cron.jobs` schema.

## App Configuration (SQLite)

These settings are stored in the `app_config` table and editable via the Admin panel or API:

| Key | Default | Description |
|-----|---------|-------------|
| `defaultMH` | `3.0` | Default man-hours per work package |
| `wpMHMode` | `include` | Whether to include WP man-hours (`include` or `exclude`) |
| `theoreticalCapacityPerPerson` | `8.0` | Theoretical MH per person per shift |
| `realCapacityPerPerson` | `6.5` | Real (effective) MH per person per shift |
| `shifts` | See below | JSON array of shift definitions |

### Shifts Configuration

```json
[
  { "name": "Day",   "startHour": 7,  "endHour": 15, "headcount": 8 },
  { "name": "Swing", "startHour": 15, "endHour": 23, "headcount": 6 },
  { "name": "Night", "startHour": 23, "endHour": 7,  "headcount": 4 }
]
```

## User Preferences (Per-User)

Stored in `user_preferences` table, editable via Account page:

| Preference | Default | Options |
|------------|---------|---------|
| Color mode | `dark` | `dark`, `light`, `system` |
| Theme preset | `neutral` | 11 Fumadocs presets |
| Accent color | — | Custom hex color |
| Compact mode | `false` | `true`, `false` |
| Default timezone | `UTC` | `UTC`, `America/New_York` |
| Default date range | `3d` | `1d`, `3d`, `7d`, `14d`, `30d` |
| Time format | `24h` | `24h`, `12h` |
| Table page size | `30` | 1–200 |
