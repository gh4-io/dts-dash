# ============================================================
# DTSD Dashboard — Production Environment
# ============================================================
# Copy to .env.prod at the project root:
#   cp docker/.env.prod.example .env.prod
#
# Generate AUTH_SECRET:
#   npm run generate-secret
#
# Application settings (logging, themes, passwords, cron) are in
# server.config.yml — not here. See server.config.dev.yml for reference.
# ============================================================

# ─── Secrets (Fallback — YAML takes priority) ────────────────

# Auth.js JWT signing secret (32+ chars, unique per environment)
# Fallback for auth.secret in server.config.yml.
# If not set here or in YAML, auto-generated on first run.
# AUTH_SECRET=<generate-with-npm-run-generate-secret>

# ─── Deployment (Fallback — YAML takes priority) ─────────────

# SQLite database path (container path for Docker, absolute for bare metal)
# Fallback for database.path in server.config.yml.
# DATABASE_PATH=/app/data/dashboard.db

# Node environment
NODE_ENV=production

# ─── Reverse Proxy (Optional) ────────────────────────────────

# Public base URL (fallback for app.baseUrl in server.config.yml).
# Only needed if proxy rewrites the Host header. Leave commented for auto-detection.
# Prefer setting app.baseUrl in server.config.yml instead.
# BASE_URL=<https://dashboard.example.com>

# ─── Error Tracking (Optional) ───────────────────────────────

# Sentry DSN for error tracking. Leave empty to disable.
# SENTRY_DSN=<https://abc123@o123456.ingest.sentry.io/123456>

# ─── Security ─────────────────────────────────────────────────
#
# NEVER set INITIAL_ADMIN_EMAIL or INITIAL_ADMIN_PASSWORD in production.
# Use /register to create the first superadmin interactively.
#
# Ensure these are set in server.config.yml:
#   logging.level: info
#   features.enableSeedEndpoint: false
#   passwordSecurity.minLength: 12 (or higher)
#   passwordSecurity.minEntropy: 50 (or higher)

# ============================================================
# Deployment Examples
# ============================================================
#
# Docker Compose:
#   cp docker/.env.prod.example .env.prod
#   # Edit .env.prod with your AUTH_SECRET
#   docker compose -f docker/docker-compose.prod.yml up -d
#
# Bare Metal / PM2:
#   cp docker/.env.prod.example .env.prod
#   # Edit DATABASE_PATH to your local path, e.g.:
#   # DATABASE_PATH=/var/lib/dashboard/dashboard.db
#   npm run build
#   npm start
#
# systemd (EnvironmentFile):
#   EnvironmentFile=/opt/cvg-dashboard/.env.prod
#
# ============================================================
# Kubernetes
# ============================================================
#
# Secret:
#   kubectl create secret generic dashboard-secrets \
#     --from-literal=AUTH_SECRET="<your-secret>"
#
# ConfigMap:
#   apiVersion: v1
#   kind: ConfigMap
#   metadata:
#     name: dashboard-config
#   data:
#     NODE_ENV: "production"
#     DATABASE_PATH: "/app/data/dashboard.db"
#
# Deployment envFrom:
#   envFrom:
#   - secretRef:
#       name: dashboard-secrets
#   - configMapRef:
#       name: dashboard-config
#
# ============================================================
# AWS ECS / Fargate
# ============================================================
#
# Store secret in AWS Secrets Manager:
#   aws secretsmanager create-secret \
#     --name dashboard-auth-secret \
#     --secret-string "<your-secret>"
#
# Task definition:
#   "secrets": [{
#     "name": "AUTH_SECRET",
#     "valueFrom": "arn:aws:secretsmanager:region:account:secret:dashboard-auth-secret"
#   }]
#   "environment": [
#     { "name": "NODE_ENV", "value": "production" },
#     { "name": "DATABASE_PATH", "value": "/app/data/dashboard.db" }
#   ]
#
# ============================================================
