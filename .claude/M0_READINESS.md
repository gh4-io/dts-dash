# M0 Readiness Summary

> **Date**: 2026-02-13
> **Session**: m0 (Milestone 0 Initialization)
> **Status**: ✅ **READY FOR IMPLEMENTATION**

## Executive Summary

The CVG Line Maintenance Operations Dashboard project is **fully planned and ready to scaffold**. All requirements, decisions, and specifications are documented and cross-linked. No code has been written yet. M0 is the bootstrap phase: create the Next.js project, install dependencies, configure the database schema, and deliver a runnable app with auth and base layout.

**Estimated Duration**: 8–12 hours (one focused session or two half-days)

---

## What's Complete

### Knowledge Base (36 files, 100% coverage)
✅ **Core docs**: CLAUDE.md, ROADMAP.md, PLAN.md, DECISIONS.md (D-001–D-025), OPEN_ITEMS.md (21 items, 18 resolved, 1 updated, 2 acknowledged)
✅ **Specs** (15 files): Filters, Auth, Account, Admin, Flight Board, Dashboard, Capacity, Analytics, Data Model, Themes (11 Fumadocs presets), Aircraft Types, Data Import, OtherPages, UI Interactions, Logging
✅ **UI Docs** (5 files): Components, Icons (Font Awesome), Filter Patterns, Reference Map (12 images), Menus
✅ **Dev Docs** (4 files): Standards, Commands (updated with M0 checklist), Test Plan, Risks (R1–R19)

### Decisions Locked (25 decisions)
- **Tech Stack**: Next.js 15, shadcn/ui, Tailwind v4, ECharts (Gantt), Recharts (charts), Zustand, Auth.js + SQLite + Drizzle
- **Architecture**: Local-first, no cloud dependencies, self-hosted Font Awesome
- **Data**: Work packages from JSON, mutable config/users in SQLite
- **Auth**: Role-based (user/admin/superadmin), server-enforced
- **UI**: 11 Fumadocs theme presets, light/dark modes, accent override
- **Business Rules**: effectiveMH chain, shift capacity, aircraft type normalization, customer colors (admin-configurable)

### Assets & References
✅ Font Awesome Pro v6.5.1 downloaded (`Font.Awesome.Pro.v6.5.1-Aetherx/`)
✅ Sample data (`input.json`, 86 work package records)
✅ Reference images (12 CVG Line Maintenance screenshots analyzed)
✅ HAR files (CargoJet APEX reference for UI patterns)

---

## What M0 Delivers

### By End of M0
- [ ] Next.js 15 project created and configured
- [ ] All dependencies installed (UI, auth, DB, charts, ECharts, state, tools)
- [ ] SQLite database initialized at `data/dashboard.db`
- [ ] Drizzle ORM schema (9 tables): users, sessions, customers, user_preferences, mh_overrides, aircraft_type_mappings, import_log, analytics_events, config
- [ ] Seed data loaded (2 users, 6 customers with colors, default type mappings)
- [ ] Auth.js configured (credentials provider, database sessions)
- [ ] Login page + middleware (route protection, role checks)
- [ ] Base layout (sidebar nav, header, user menu, theme toggle)
- [ ] Font Awesome integrated (self-hosted CSS + webfonts)
- [ ] Tailwind v4 with CSS custom properties for theme system
- [ ] TypeScript strict mode, path aliases, ESLint config
- [ ] `.gitignore` configured for Next.js + SQLite + uploads
- [ ] `npm run build` passes
- [ ] `npm run lint` clean
- [ ] `npm run dev` serves app at localhost:3000 without console errors

### Acceptance Criteria (from ROADMAP.md M0)
- [ ] `npm run dev` serves app on localhost:3000
- [ ] `npm run build` passes clean
- [ ] SQLite database created at `data/dashboard.db` with all tables
- [ ] Seed data loaded (2 users, 6 customers, default type mappings)
- [ ] Login page renders; auth flow works (login/logout)
- [ ] Protected routes redirect to `/login` when not authenticated
- [ ] Admin routes return 403 for non-admin users
- [ ] Base layout renders (sidebar, header with user menu, theme toggle)
- [ ] Font Awesome icons render correctly
- [ ] Dark theme is default; light mode toggle works

---

## Critical Pre-Checks

### Repository State
- ✅ Git initialized (`.git/` present)
- ✅ `.gitignore` configured for Next.js + SQLite
- ✅ No `src/` directory yet (clean slate)
- ✅ `.claude/` knowledge base complete
- ✅ Font Awesome assets downloaded and accessible
- ✅ `/plan/` folder with prior plans (reference only)

### System Requirements
- Node.js 18+ (for better-sqlite3 native build)
- npm or yarn
- Python 3.x (better-sqlite3 needs build tools)

### Known Constraints
- **better-sqlite3** is a native module (C++ bindings) — may require build tools on first install
- **next.config.js** must include `serverComponentsExternalPackages: ['better-sqlite3']`
- **ECharts** must use dynamic import with `ssr: false` to avoid SSR errors

---

## Files to Create in M0

### Root-Level
- `next.config.js` (with transpilePackages + serverComponentsExternalPackages)
- `tsconfig.json` (strict mode, path aliases)
- `tailwind.config.ts` (Tailwind v4)
- `src/styles/globals.css` (Tailwind import + theme CSS variables)
- `src/middleware.ts` (auth + role checks)
- `package.json` (will be auto-generated by create-next-app, then enhanced)

### Authentication & Database
- `src/lib/auth.ts` (Auth.js config)
- `src/lib/db/client.ts` (SQLite connection)
- `src/lib/db/schema.ts` (Drizzle schema, 9 tables)
- `src/lib/db/seed.ts` (seed data loader)
- `src/lib/db/migrations/` (as needed)

### Layout & Navigation
- `src/app/layout.tsx` (root layout, theme provider, Auth.js provider)
- `src/components/layout/header.tsx` (top nav, user menu, theme toggle)
- `src/components/layout/sidebar.tsx` (side navigation)
- `src/components/layout/user-menu.tsx` (dropdown: Account, Admin, Logout)
- `src/components/layout/mobile-nav.tsx` (mobile sheet nav)
- `src/components/layout/theme-provider.tsx` (next-themes provider)

### Pages
- `src/app/login/page.tsx` (login form, unauthenticated route)
- `src/app/page.tsx` (redirect to dashboard or login)
- `src/app/flight-board/page.tsx` (placeholder for M2)
- `src/app/dashboard/page.tsx` (placeholder for M3)
- `src/app/capacity/page.tsx` (placeholder for M4)
- `src/app/settings/page.tsx` (placeholder for M5)
- `src/app/account/page.tsx` (placeholder for M5)
- `src/app/admin/page.tsx` (placeholder for M6)

### API Routes
- `src/app/api/auth/[...nextauth].ts` (Auth.js routes)
- `src/app/api/config.ts` (config GET/PUT)

### Shared Components & Utilities
- `src/components/ui/` (shadcn/ui components via `shadcn init`)
- `src/components/shared/fa-icon.tsx` (Font Awesome helper)
- `src/lib/utils/` (helpers, constants, type guards)
- `src/types/` (TypeScript interfaces from REQ_DataModel.md)

### Assets
- `public/vendor/fontawesome/css/all.min.css` (copied from download)
- `public/vendor/fontawesome/webfonts/` (all font files)
- `data/input.json` (sample work packages, read-only)

---

## Open Items Requiring Action (Before or During M0)

### OI-003 (Updated) — Aircraft Type Seed Rules
**Status**: User should review seed mapping rules and add registration-to-type patterns via Admin UI post-launch.
**Action for M0**: Include empty aircraft_type_mappings table. Seed with generic patterns (e.g., `B777*` → B777). User can add fleet-specific patterns later.

### OI-006 & OI-007 (Acknowledged) — HAR Limitations
**Status**: Informational. No CargoJet API authentication captured. Pagination not observed in reference data.
**Action for M0**: None. Document in REQ_DataSources.md for future live API integration attempt.

---

## File Counts

| Category | Count |
|----------|-------|
| Next.js pages | 8 |
| Layout components | 6 |
| Auth/DB setup | 4 |
| UI components (shadcn) | ~15 |
| Shared utilities | ~8 |
| Type definitions | ~5 |
| **Total new files (M0)** | **~50** |

---

## Verification Checklist (End of M0)

After completing all tasks, verify:

```bash
# 1. Build passes
npm run build
# Expected: No errors, output in .next/

# 2. Lint clean
npm run lint
# Expected: No warnings/errors

# 3. Dev server starts
npm run dev
# Expected: Server running at http://localhost:3000

# 4. Database created
ls -la data/dashboard.db
# Expected: File exists, >100KB

# 5. Manual checks (in browser at localhost:3000)
# - Login page loads
# - Can log in with test credentials (user: test@example.com, pass: password)
# - Redirected to dashboard
# - Sidebar + header render
# - Theme toggle works
# - User menu shows Account/Admin/Logout
# - Logout works, redirects to login
```

---

## Next Phase (M1)

After M0 completes, M1 will build the data layer:
- Work package reader + transformer
- API routes (work-packages, hourly-snapshots, capacity, config)
- Aircraft type normalization service
- effectiveMH computation
- Analytics event tracking infrastructure

M1 Acceptance: All data endpoints operational, no console errors.

---

## Session Notes

- This document serves as the **M0 kickoff guide**.
- Update [OPEN_ITEMS.md](OPEN_ITEMS.md) as issues arise during M0.
- Verify against [ROADMAP.md](ROADMAP.md) M0 acceptance criteria.
- If blocked, refer to [DECISIONS.md](DECISIONS.md) for rationale on controversial choices.
